<UserControl x:Class="FlatPatternExporter.TemplatePresetManagerControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:converters="clr-namespace:FlatPatternExporter.Converters">
    
    <GroupBox Header="Менеджер пресетов шаблонов">
        <StackPanel Margin="{StaticResource SectionContentMarginThickness}">
            
            <!-- Выбор и управление пресетами -->
            <TextBlock Text="Сохраненные пресеты:" Style="{StaticResource SectionHeaderTextStyle}"/>
            <Grid Margin="{StaticResource BottomSmallMarginThickness}">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <ComboBox x:Name="TemplatePresetsComboBox" 
                          Grid.Column="0"
                          ItemsSource="{Binding PresetManager.TemplatePresets}"
                          DisplayMemberPath="Name"
                          SelectedItem="{Binding PresetManager.SelectedTemplatePreset, Mode=TwoWay}"
                          SelectionChanged="TemplatePresetsComboBox_SelectionChanged"
                          ToolTip="Выберите сохраненный пресет шаблона"
                          Style="{StaticResource BaseComboBoxStyle}">
                </ComboBox>
                
                <Button Grid.Column="1"
                        x:Name="DeletePresetButton"
                        Content="Удалить"
                        Click="DeletePresetButton_Click"
                        Style="{StaticResource WarningButtonStyle}"
                        IsEnabled="{Binding PresetManager.SelectedTemplatePreset, Converter={x:Static converters:ObjectToBooleanConverter.Instance}}"
                        ToolTip="Удалить выбранный пресет"
                        Margin="{StaticResource LeftSmallMarginThickness}"/>
            </Grid>
            
            <!-- Пустое состояние -->
            <Border x:Name="EmptyStatePanel" 
                    Background="{StaticResource BackgroundSecondaryBrush}" 
                    BorderBrush="{StaticResource BorderSecondaryBrush}" 
                    BorderThickness="{StaticResource StandardBorderThicknessValue}"
                    Padding="{StaticResource StandardPaddingThickness}"
                    Margin="{StaticResource BottomSmallMarginThickness}"
                    Visibility="Collapsed">
                <TextBlock Text="Нет сохраненных пресетов. Создайте первый пресет для быстрого доступа к часто используемым шаблонам."
                           Style="{StaticResource OverlayHintTextStyle}"
                           TextAlignment="Center"/>
            </Border>
            
            <!-- Сохранение нового пресета -->
            <Separator Style="{StaticResource HorizontalSeparatorStyle}" Margin="{StaticResource BottomSmallMarginThickness}"/>
            
            <TextBlock Text="Создать новый пресет:" Style="{StaticResource SectionHeaderTextStyle}"/>
            <Grid Margin="{StaticResource BottomSmallMarginThickness}">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <TextBox x:Name="PresetNameTextBox" 
                         Grid.Column="0"
                         Style="{StaticResource BaseTextBoxStyle}"
                         ToolTip="Введите имя для нового пресета"/>
                
                <Button x:Name="SavePresetButton"
                        Grid.Column="1"
                        Content="Сохранить"
                        Click="SavePresetButton_Click"
                        Style="{StaticResource InteractiveActionButtonStyle}"
                        ToolTip="Сохранить текущий шаблон как новый пресет"
                        Margin="{StaticResource LeftSmallMarginThickness}"/>
            </Grid>
            
            <!-- Подсказка для ввода имени -->
            <TextBlock Text="Введите описательное имя для пресета, например: 'Стандартная деталь', 'С толщиной и материалом'"
                       Style="{StaticResource OverlayHintTextStyle}"
                       Opacity="0.7"/>
        </StackPanel>
    </GroupBox>
</UserControl>