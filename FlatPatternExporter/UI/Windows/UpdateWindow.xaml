<Window x:Class="FlatPatternExporter.UI.Windows.UpdateWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:shell="clr-namespace:System.Windows.Shell;assembly=PresentationFramework"
        xmlns:local="clr-namespace:FlatPatternExporter.UI.Controls"
        xmlns:extensions="clr-namespace:FlatPatternExporter.Extensions"
        shell:WindowChrome.WindowChrome="{StaticResource CustomWindowChrome}"
        Title="{extensions:Localize Header_Update}"
        WindowStartupLocation="CenterScreen"
        ResizeMode="NoResize"
        Width="500"
        Background="{DynamicResource BackgroundPrimaryBrush}"
        Foreground="{DynamicResource TextSecondaryBrush}" SizeToContent="Height">

    <Border Style="{StaticResource WindowRootBorderStyle}">
        <Grid SnapsToDevicePixels="True">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <local:CustomTitleBar Grid.Row="0"
                                  Title="{extensions:Localize Header_Update}"
                                  ShowMinimizeButton="False"
                                  ShowMaximizeButton="False"/>

            <Grid Grid.Row="1" Margin="{StaticResource StandardPaddingThickness}">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <Grid Grid.Row="0" Margin="{StaticResource VerticalSmallMarginThickness}">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <Border Grid.Column="0"
                            Width="64"
                            Height="64"
                            CornerRadius="{StaticResource StandardCornerRadiusValue}"
                            Background="{DynamicResource BackgroundSecondaryBrush}"
                            BorderBrush="{DynamicResource AccentBrush}"
                            BorderThickness="1"
                            Margin="0,0,16,0" HorizontalAlignment="Center" VerticalAlignment="Center">
                        <Path Data="{StaticResource DownloadIconGeometry}"
                              Stroke="{DynamicResource AccentBrush}"
                              StrokeThickness="2"
                              StrokeStartLineCap="Round"
                              StrokeEndLineCap="Round"
                              StrokeLineJoin="Round"
                              Width="40"
                              Height="40"
                              Stretch="Uniform"
                              HorizontalAlignment="Center"
                              VerticalAlignment="Center"/>
                    </Border>

                    <GroupBox Grid.Column="1" Header="{extensions:Localize Header_VersionInformation}">
                        <Grid Margin="{StaticResource SectionContentMarginThickness}">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <TextBlock Grid.Row="0" Grid.Column="0"
                                       Text="{extensions:Localize Text_CurrentVersion}"
                                       Style="{StaticResource BaseTextBlockStyle}"
                                       FontWeight="SemiBold"
                                       Margin="{StaticResource RightSmallMarginThickness}"/>
                            <TextBlock Grid.Row="0" Grid.Column="1"
                                       x:Name="CurrentVersionTextBlock"
                                       Style="{StaticResource BaseTextBlockStyle}"/>

                            <TextBlock Grid.Row="1" Grid.Column="0"
                                       Text="{extensions:Localize Text_NewVersion}"
                                       Style="{StaticResource BaseTextBlockStyle}"
                                       FontWeight="SemiBold"
                                       Margin="0,4,4,0"/>
                            <TextBlock Grid.Row="1" Grid.Column="1"
                                       x:Name="NewVersionTextBlock"
                                       Style="{StaticResource BaseTextBlockStyle}"
                                       Foreground="{DynamicResource AccentBrush}"
                                       Margin="0,4,0,0"/>
                        </Grid>
                    </GroupBox>
                </Grid>

                <GroupBox Grid.Row="1" Header="{extensions:Localize Header_ReleaseNotes}" Margin="{StaticResource VerticalSmallMarginThickness}">
                    <ScrollViewer MaxHeight="120" VerticalScrollBarVisibility="Auto" Margin="{StaticResource SectionContentMarginThickness}">
                        <TextBlock x:Name="ReleaseNotesTextBlock"
                                   Style="{StaticResource BaseTextBlockStyle}"
                                   TextWrapping="Wrap"
                                   Foreground="{DynamicResource TextMutedBrush}"
                                   FontSize="{StaticResource SmallFontSize}"/>
                    </ScrollViewer>
                </GroupBox>

                <GroupBox Grid.Row="2" Header="{extensions:Localize Header_DownloadProgress}" x:Name="ProgressGroupBox" Margin="{StaticResource VerticalSmallMarginThickness}" Visibility="Collapsed">
                    <StackPanel Margin="{StaticResource SectionContentMarginThickness}">
                        <ProgressBar x:Name="DownloadProgressBar"
                                     Height="20"
                                     Minimum="0"
                                     Maximum="100"
                                     Margin="{StaticResource BottomSmallMarginThickness}"/>
                        <TextBlock x:Name="ProgressTextBlock"
                                   Style="{StaticResource BaseTextBlockStyle}"
                                   HorizontalAlignment="Center"
                                   FontSize="{StaticResource SmallFontSize}"
                                   Foreground="{DynamicResource TextMutedBrush}"/>
                    </StackPanel>
                </GroupBox>

                <TextBlock Grid.Row="3"
                           x:Name="StatusTextBlock"
                           Style="{StaticResource BaseTextBlockStyle}"
                           HorizontalAlignment="Center"
                           VerticalAlignment="Center"
                           TextWrapping="Wrap"
                           TextAlignment="Center"
                           Foreground="{DynamicResource TextMutedBrush}"/>

            </Grid>

            <Border Grid.Row="2" Style="{StaticResource DialogBottomBarStyle}">
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                    <Button x:Name="InstallButton"
                            Content="{extensions:Localize Button_InstallUpdate}"
                            Style="{StaticResource FileNameActionButtonStyle}"
                            Click="InstallButton_Click"
                            Margin="{StaticResource RightSmallMarginThickness}"/>
                    <Button x:Name="CancelButton"
                            Content="{extensions:Localize Button_Cancel}"
                            Style="{StaticResource FileNameActionButtonStyle}"
                            Click="CancelButton_Click"/>
                </StackPanel>
            </Border>
        </Grid>
    </Border>
</Window>
