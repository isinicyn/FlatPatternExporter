<Window x:Class="FlatPatternExporter.Updater.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:shell="clr-namespace:System.Windows.Shell;assembly=PresentationFramework"
        xmlns:controls="clr-namespace:FlatPatternExporter.UI.Controls"
        shell:WindowChrome.WindowChrome="{StaticResource CustomWindowChrome}"
        Title="FlatPatternExporter - Updater"
        WindowStartupLocation="CenterScreen"
        ResizeMode="NoResize"
        Width="550"
        Background="{DynamicResource BackgroundPrimaryBrush}"
        Foreground="{DynamicResource TextSecondaryBrush}" SizeToContent="Height">

    <Border Style="{StaticResource WindowRootBorderStyle}">
        <Grid SnapsToDevicePixels="True">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <controls:CustomTitleBar Grid.Row="0"
                                     Title="FlatPatternExporter - Updater"
                                     ShowMinimizeButton="False"
                                     ShowMaximizeButton="False"/>

            <Grid Grid.Row="1" Margin="{StaticResource StandardPaddingThickness}">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <Grid Grid.Row="0" Margin="{StaticResource VerticalSmallMarginThickness}">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <Border Grid.Column="0"
                            Width="64"
                            Height="64"
                            CornerRadius="{StaticResource StandardCornerRadiusValue}"
                            Background="{DynamicResource BackgroundSecondaryBrush}"
                            BorderBrush="{DynamicResource AccentBrush}"
                            BorderThickness="1"
                            Margin="0,0,16,0"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center">
                        <Path Data="{StaticResource DownloadIconGeometry}"
                              Stroke="{DynamicResource AccentBrush}"
                              StrokeThickness="2"
                              StrokeStartLineCap="Round"
                              StrokeEndLineCap="Round"
                              StrokeLineJoin="Round"
                              Width="40"
                              Height="40"
                              Stretch="Uniform"
                              HorizontalAlignment="Center"
                              VerticalAlignment="Center"/>
                    </Border>

                    <GroupBox Grid.Column="1" Header="Update Status">
                        <TextBlock x:Name="StatusTextBlock"
                                   Text="Initializing..."
                                   TextWrapping="Wrap"
                                   Style="{StaticResource BaseTextBlockStyle}"
                                   Margin="{StaticResource SectionContentMarginThickness}"/>
                    </GroupBox>
                </Grid>

                <GroupBox Grid.Row="1" Header="Progress" Margin="{StaticResource VerticalSmallMarginThickness}">
                    <StackPanel Margin="{StaticResource SectionContentMarginThickness}">
                        <ProgressBar x:Name="UpdateProgressBar"
                                     Height="20"
                                     Minimum="0"
                                     Maximum="100"
                                     Value="0"
                                     Margin="{StaticResource BottomSmallMarginThickness}"/>
                        <TextBlock x:Name="ProgressTextBlock"
                                   Text=""
                                   HorizontalAlignment="Center"
                                   FontSize="{StaticResource SmallFontSize}"
                                   Foreground="{DynamicResource TextMutedBrush}"/>
                    </StackPanel>
                </GroupBox>

                <GroupBox Grid.Row="2" Header="Details" Margin="{StaticResource VerticalSmallMarginThickness}">
                    <ScrollViewer MaxHeight="80" VerticalScrollBarVisibility="Auto" Margin="{StaticResource SectionContentMarginThickness}">
                        <TextBlock x:Name="DetailsTextBlock"
                                   Text="Waiting for launch..."
                                   TextWrapping="Wrap"
                                   FontSize="{StaticResource SmallFontSize}"
                                   Foreground="{DynamicResource TextMutedBrush}"/>
                    </ScrollViewer>
                </GroupBox>
            </Grid>

            <Border Grid.Row="2" Style="{StaticResource DialogBottomBarStyle}">
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                    <Button x:Name="CloseButton"
                            Content="OK"
                            Style="{StaticResource FileNameActionButtonStyle}"
                            Click="CloseButton_Click"
                            IsEnabled="False"/>
                </StackPanel>
            </Border>
        </Grid>
    </Border>
</Window>
